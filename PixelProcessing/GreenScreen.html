---
layout: page
---
<div class="jumbotron">
  <div class="container">
    <h1>Green Screen</h1>
  </div>
</div>
<div class="container">
  <h2>Green Screen</h2>
  <code><pre>class GreenScreen {

  PImage foreground; //this one's the green screen
  PImage background; //this is the background we replace green with

  GreenScreen(PImage foreground, PImage background) {
    this.foreground = foreground;
    this.background = background;
  }

  void display() {
    size(background.width, background.height);
    image(background, 0, 0);
    loadPixels();
    removeGreen(foreground);
    overlay(foreground);
    updatePixels();
  }

  void removeGreen(PImage img) {
    background(255);
    for (int i = 0; i < img.pixels.length; i++) {
      float r = red(img.pixels[i]);
      float g = green(img.pixels[i]);
      float b = blue(img.pixels[i]);

      // alternative if (g > r && g > b)
      if (g > r+15 && g > b+55) { 
        img.pixels[i] = color(0, 0, 0, 0);
      }
    }
  }

  void overlay(PImage img) {
    for (int x = 0; x < img.width; x++) {
      for (int y = 0; y < img.height; y++) {
        int location = x + y * img.width;
        float r = red(img.pixels[location]);
        float g = green(img.pixels[location]);
        float b = blue(img.pixels[location]);
        float a = alpha(img.pixels[location]);
        if (false == (r == 0 && g == 0 && b == 0 && a == 0)) {
          pixels[x + y * img.width] = img.pixels[location];
        }
      }
    }
  }
}</pre></code>
  <h2>Green Screen Driver</h2>
  <p>Note this only works if the background is of greater dimension than the foreground.</p>
  <code><pre>PImage foreground;
PImage background;

void setup() {
  foreground = loadImage("spaceship.png");
  background = loadImage("space.png");
  GreenScreen gs = new GreenScreen(foreground, background);
  gs.display();
}

void draw() { } //required for keyPressed event to fire
void keyPressed() {
  if(key == 'p' || key == 'P') {
    saveFrame("data/" + System.currentTimeMillis() + ".jpg");
  }
}</pre></code>
</div>